<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-001450adca89e6cdddeb99ef0eafc5ee.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.30">

  <meta name="author" content="Heather Turner and Ella Kaye">
  <meta name="author" content="Department of Statistics">
  <meta name="dcterms.date" content="2027-06-27">
  <title>Forwards R Package Workshop – Package check and documentation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #adadbd;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #adadbd;  padding-left: 4px; }
    div.sourceCode
      { color: #2e2e2f;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #2e2e2f; } /* Normal */
    code span.al { color: #5931a5; } /* Alert */
    code span.an { color: #494957; } /* Annotation */
    code span.at { color: #a5317d; } /* Attribute */
    code span.bn { color: #5931a5; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #e95a61; } /* ControlFlow */
    code span.ch { color: #31a559; } /* Char */
    code span.cn { color: #e95a61; } /* Constant */
    code span.co { color: #494957; } /* Comment */
    code span.cv { color: #494957; font-style: italic; } /* CommentVar */
    code span.do { color: #494957; font-style: italic; } /* Documentation */
    code span.dt { color: #5931a5; } /* DataType */
    code span.dv { color: #5931a5; } /* DecVal */
    code span.er { color: #5931a5; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #5931a5; } /* Float */
    code span.fu { color: #3143a5; } /* Function */
    code span.im { color: #a5317d; } /* Import */
    code span.in { color: #494957; } /* Information */
    code span.kw { color: #2e2e2f; } /* Keyword */
    code span.op { color: #494957; } /* Operator */
    code span.ot { color: #494957; } /* Other */
    code span.pp { color: #5931a5; } /* Preprocessor */
    code span.re { color: #3143a5; } /* RegionMarker */
    code span.sc { color: #494957; } /* SpecialChar */
    code span.ss { color: #31a559; } /* SpecialString */
    code span.st { color: #31a559; } /* String */
    code span.va { color: #2e2e2f; } /* Variable */
    code span.vs { color: #31a559; } /* VerbatimString */
    code span.wa { color: #494957; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-6059b378c79d37d2de3c8fed5a66da15.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#200F48" data-background-image="../../site_libs/quarto-contrib/quarto-project/forwards/forwardspres/forwards_hex_solid_border.svg" data-background-position="97% 5%" data-background-size="7%" class="quarto-title-block center">
  <h1 class="title">Package check and documentation</h1>
  <p class="subtitle">R package development workshop</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Heather Turner and Ella Kaye 
</div>
</div>
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Department of Statistics 
</div>
</div>
</div>

  <p class="date">June 27, 2027</p>
</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<ul>
<li>Check your package!</li>
<li>DESCRIPTION</li>
<li>README</li>
<li>Continuous Integration (CI)</li>
<li>Vignettes</li>
<li>NEWS</li>
<li>Package website with pkgdown</li>
</ul>
</section>
<section>
<section id="check-your-package" class="title-slide slide level1 inverse center">
<h1>Check your package!</h1>

</section>
<section id="r-cmd-check" class="slide level2">
<h2>R CMD check</h2>
<p><code>R CMD check</code> is the command line utility provided by R to check R packages.</p>
<p>It checks that all the components are valid and consistent with each other, in particular:</p>
<ul>
<li>Metadata in DESCRIPTION</li>
<li>Imports and exports in NAMESPACE</li>
<li><code>.Rd</code> files in <code>/man</code></li>
</ul>
<p>It will also run any examples and tests you have written.</p>
<p><code>devtools::check()</code> will run <code>R CMD check</code> in the background, with the results shown in the Build pane.</p>
<aside class="notes">
<p>Note that this doesn’t check the correctness of code - this is the role of tests</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="run-devtoolscheck" class="slide level2">
<h2>Run <code>devtools::check()</code></h2>
<p>You will get lots of output. It will end with:</p>
<pre><code>-- R CMD check results ---------- animalsounds 0.0.0.9000 ----
Duration: 9.3s

&gt; checking DESCRIPTION meta-information ... WARNING
  Non-standard license specification:
    `use_mit_license()`, `use_gpl3_license()` or friends to pick a
    license
  Standardizable: FALSE

0 errors √ | 1 warnings x | 0 notes √</code></pre>
<p>We haven’t yet specified a license for our package.</p>
<aside class="notes">
<p>On running <code>check()</code> you may get an error if you are using a networked drive. There’s a fix coming in a few slides.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="aside-in-case-of-error" class="slide level2">
<h2>Aside: in case of error</h2>
<p>On running <code>devtools::check()</code> you may get an error of the form</p>
<pre><code>Updating animalsounds documentation  
Error: The specified file is not readable: path-to\animalsounds\NAMESPACE  </code></pre>
<p>This can happen if your repo is on a networked drive.</p>
<p>This is covered in this <a href="https://stackoverflow.com/questions/40530968/overwriting-namespace-and-rd-with-roxygen2">Stackoverflow question</a> and can be fixed.</p>
</section>
<section id="aside-a-fix-for-networked-drives" class="slide level2">
<h2>Aside: a fix for networked drives</h2>
<ol type="1">
<li><p>Save a copy of this file: <a href="../../R/fix_for_networked_drives.R">fix_for_networked_drives.R</a></p>
<p>Save it somewhere other than the <code>animalsounds</code> directory</p></li>
<li><p>Open the file from the <code>animalsounds</code> project session</p></li>
<li><p>Run the whole file</p></li>
</ol>
<p>You should now find that <code>devtools::check()</code> proceeds normally.</p>
</section>
<section id="types-of-problem" class="slide level2">
<h2>Types of problem</h2>
<p><br></p>
<table class="caption-top">
<tbody>
<tr class="odd">
<td><strong>ERROR</strong></td>
<td>Must fix to get the code/example/test working</td>
</tr>
<tr class="even">
<td><strong>WARNING</strong></td>
<td>Fix if sharing with others</td>
</tr>
<tr class="odd">
<td><strong>NOTE</strong></td>
<td>Fix if submitting to CRAN</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>It is possible to submit to CRAN with a NOTE, but it’s best avoided.</p>
<aside class="notes">
<p>NOTES best avoid for CRAN as they require a person to respond. One unavoidable case of a NOTE on CRAN submission: first submission of a package</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="check-regularly-fix-issues-as-they-arise" class="slide level2 inverse center center-h">
<h2>Check regularly, fix issues as they arise</h2>
<aside class="notes">
<p>Will see later in this session how to do this automatically with Continuous Integration</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="description" class="title-slide slide level1 inverse center">
<h1>DESCRIPTION</h1>
<aside class="notes">
<p>The are two types of documentation: package level and function level.</p>
<p>The DESCRIPTION file provides some of the package level documentation (or metadata)</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="metadata-in-description" class="slide level2">
<h2>Metadata in <code>DESCRIPTION</code></h2>
<ul>
<li><strong>Package</strong>: The package name. The <code>changer</code> package can help you change the name!</li>
<li><strong>Title</strong>: One line, title case, with no period. Fewer than 65 characters.</li>
<li><strong>Version</strong>
<ul>
<li>for release: MAJOR.MINOR.PATCH version.</li>
<li>for development version building on version MAJOR.MINOR.PATCH, use: MAJOR.MINOR.PATCH.9000</li>
<li>can be filled in with <code>usethis::use_version()</code></li>
</ul></li>
</ul>
<aside class="notes">
<p>Given a version number MAJOR.MINOR.PATCH, increment the:</p>
<p>MAJOR version when you make incompatible API changes, MINOR version when you add functionality in a backwards compatible manner, and PATCH version when you make backwards compatible bug fixes.</p>
<p>Will see usethis::use_version() in session on publication</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="metadata-in-description-1" class="slide level2">
<h2>Metadata in <code>DESCRIPTION</code></h2>
<div class="smaller90">
<ul>
<li><p><strong>Authors@R</strong>: A call to <code>person()</code> that is run to create the Author field when the package tarball is built. “aut” means author, “cre” means creator (maintainer), “ctb” means contributor.</p>
<p>A placeholder call to <code>person()</code> is inserted in <code>DESCRIPTION</code> when a package is created with <code>usethis::create_package()</code> which can be edited directly:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">person</span>(<span class="st">"A"</span>, <span class="st">"Person"</span>, <span class="at">email =</span> <span class="st">"a.person@email.com"</span>, </span>
<span id="cb3-2"><a></a>       <span class="at">role =</span> <span class="fu">c</span>(<span class="st">"aut"</span>, <span class="st">"cre"</span>),</span>
<span id="cb3-3"><a></a>       <span class="at">comment =</span> <span class="fu">c</span>(<span class="at">ORCID =</span> <span class="st">"0000-0001-2345-6789"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, this can be overwritten with a call to <code>usethis::use_author()</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">use_author</span>(<span class="st">"A"</span>, <span class="st">"Person"</span>, <span class="at">email =</span> <span class="st">"a.person@email.com"</span>, </span>
<span id="cb4-2"><a></a>     <span class="at">role =</span> <span class="fu">c</span>(<span class="st">"aut"</span>, <span class="st">"cre"</span>),</span>
<span id="cb4-3"><a></a>     <span class="at">comment =</span> <span class="fu">c</span>(<span class="at">ORCID =</span> <span class="st">"0000-0001-2345-6789"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
</ul>
</div>
<aside class="notes">
<p>usethis::use_author() is new in usethis 2.2.0</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="metadata-in-description-2" class="slide level2">
<h2>Metadata in <code>DESCRIPTION</code></h2>
<ul>
<li><strong>Description</strong>: One paragraph describing what the package does. Keep the width of the paragraph to 80 characters; indent subsequent lines with 4 spaces.</li>
<li><strong>License</strong>: Will discuss later</li>
<li><strong>Encoding</strong>: How to encode text, use UTF-8 encoding.</li>
<li><strong>LazyData</strong>: If <code>true</code> data sets in the package are stored in a database during package installation and loaded from the database as required. Recommended if shipping data with package – <code>usethis::use_data()</code> will set this for you.</li>
</ul>
<aside class="notes">
<p>usethis::create_package() sets UTF-8 encoding</p>
<p>lazy loading means that data is only loaded if needed. This means that they won’t occupy any memory until you use them. do NOT include LazyData: true in DESCRIPTION unless you actually ship data in your package.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="open-source-licenses" class="slide level2">
<h2>Open source licenses</h2>
<p>There are three main open source licenses:</p>
<ul>
<li><p>CC0: “public domain”, best for data packages.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_cc0_license</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>MIT: Free for anyone to do anything with (including bundling in closed source product).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_mit_license</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>GPL: Changes and bundles must also be GPL</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_gpl_license</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="smaller80">If you are including someone else’s GPL code directly, you must use GPL yourself.</span></p></li>
</ul>
<aside class="notes">
<p>https://bookdown.org/rdpeng/RProgDA/open-source-licensing.html</p>
<p>somewhat personal down to how important you consider open source to be and what you are happy with people doing with your code</p>
<p>Suggest academic: GPL; community/other: MIT</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="proprietary-packages" class="slide level2">
<h2>Proprietary packages</h2>
<p>You can use <code>usethis::use_proprietary()</code> to make it clear that your package isn’t open source.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_proprietary</span>(<span class="at">copyright_holder =</span> <span class="st">"ACME Ltd"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In DESCRIPTION:</p>
<pre><code>License: file LICENSE</code></pre>
<p>In LICENSE:</p>
<pre><code>Copyright 2023 ACME Ltd. All rights reserved.</code></pre>
</section>
<section id="licensing-considerations-at-universities" class="slide level2">
<h2>Licensing considerations at universities</h2>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p><span class="smaller80">This slide is specific for The University of Warwick, but similar considerations are likely to be true at other Universities.</span></p>
</div>
</div>
</div>
<div class="smaller75">
<ul>
<li><p>Software is defined as a creative output (unlike scholarly works, e.g.&nbsp;thesis, conference paper)</p></li>
<li><p>The university owns the IP of any software created by Warwick PhD students and staff in the course of their work</p></li>
<li><p>Before making code public or publishing software under any license, contact Brendan at <a href="mailto:B.Spillane@warwick.ac.uk">B.Spillane@warwick.ac.uk</a></p>
<ul>
<li>Permission to publish under an open source license likely to be granted for research code</li>
<li>Not necessary to obtain permission if open source software was part of grant proposal (as proposal will have already been checked by Research &amp; Impact Services, who will have identified any IP issues).</li>
</ul></li>
</ul>
</div>
<aside class="notes">
<p>Extra note from Brendan: “they don’t need to come to me with every single bit of code they open source. I’m more interested in the entirety of the project rather than approving 2000 bits of individual code!”</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="your-turn" class="slide level2">
<h2>Your turn</h2>
<ol type="1">
<li>Open the DESCRIPTION file and add a title and description.</li>
<li>Add yourself as an author and creator.</li>
<li>Add an MIT license.</li>
<li>Run the package check.</li>
<li>Commit changes to GitHub.</li>
</ol>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>In RStudio, you can use the ‘Go to file/function’ box or Ctrl + . [period] and start typing a file name to open a file for editing.</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="readme" class="title-slide slide level1 inverse center">
<h1>README</h1>

</section>
<section id="readme-1" class="slide level2">
<h2>README</h2>
<p>The README is the quick start guide to your package.</p>
<p>It should include</p>
<ul>
<li>a brief overview</li>
<li>instructions on how to install the package</li>
<li>a few examples</li>
</ul>
<p>You should be able to borrow from the DESCRIPTION and help files!</p>
<p>It’s readable on the package’s GitHub repo and on the homepage of its website (more on that later).</p>
</section>
<section id="creating-a-readme" class="slide level2">
<h2>Creating a README</h2>
<p><strong>usethis</strong> has functions to set up a README with/without R code</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_readme_rmd</span>()</span>
<span id="cb11-2"><a></a>usethis<span class="sc">::</span><span class="fu">use_readme_md</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>README.Rmd</code> must be rendered to make <code>README.md</code> each time it is changed.</p>
<p><code>usethis::use_readme_rmd()</code> creates a <em>pre-commit hook</em> to check if <code>README.Rmd</code> and <code>README.md</code> are out of sync before committing.</p>
<p>Use <code>build_readme()</code> to render with the latest version of the code.</p>
<aside class="notes">
<p><code>build_readme</code> creates a temporary version of the package</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="continuous-integration-ci" class="title-slide slide level1 inverse center">
<h1>Continuous Integration (CI)</h1>
<aside class="notes">
<p>The practice of merging new code into the repository and running checks each time is known as Continuous Integration.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="running-automatic-checks" class="slide level2">
<h2>Running automatic checks</h2>
<p>GitHub Actions (GHAs) allow you to run code every time you push to GitHub.</p>
<p>The most useful ones for packages can be selected from a call to <code>usethis::use_github_action()</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">use_github_action</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Which action do you want to add? (0 to exit)
(See &lt;https://github.com/r-lib/actions/tree/v2/examples&gt; for other options) 

1: check-standard: Run `R CMD check` on Linux, macOS, and Windows
2: test-coverage: Compute test coverage and report to https://about.codecov.io
3: pr-commands: Add /document and /style commands for pull requests</code></pre>
<p><code>check-standard</code> sets up a GHA that runs <code>R CMD check</code> with the latest release of R on Linux, Mac, and Windows and with both the previous release and development release of R on Linux.</p>
<aside class="notes">
<p>This behaviour of <code>use_github_action()</code> is new in usethis 2.2.</p>
<p><code>use_github_actions()</code> is deprecated.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="use_github_actioncheck-release" class="slide level2">
<h2><span class="smaller90"><code>use_github_action("check-release")</code></span></h2>
<p>The <code>check-standard</code> GHA is best-practice for ‘serious’ projects, e.g.&nbsp;those aiming for CRAN, but is overkill for our purposes.</p>
<p>We can set up a simpler GHA by specifying an alternative:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">use_github_action</span>(<span class="st">"check-release"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This sets up a bare-minimum workflow that runs <code>R CMD check</code> with the latest release of R on Linux.</p>
<p>It’s good for simple package with no OS-sepcific code, and if you want a quick start with R CI.</p>
<aside class="notes">
<p>i.e.&nbsp;it’s perfect for us!</p>
<p>Reminder to fix any issues as soon as they arise!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="your-turn-1" class="slide level2">
<h2>Your turn</h2>
<ol type="1">
<li>Create a README for <code>animalsounds</code> with <code>usethis::use_readme_rmd()</code>.</li>
<li>Fill in the description and an example.</li>
<li>Try adding the README in a git commit – it should fail! Render the README with <code>build_readme()</code>, then add both <code>README.Rmd</code> and <code>README.md</code> in a git commit.</li>
<li>Run <code>usethis::use_github_action("check-release")</code>. It adds a badge to the README, so you will need to render the README again.</li>
<li>Commit all the changes to git.</li>
</ol>
</section></section>
<section>
<section id="vignettes" class="title-slide slide level1 inverse center">
<h1>Vignettes</h1>

</section>
<section id="vignettes-1" class="slide level2">
<h2>Vignettes</h2>
<p>Vignettes are long-form documentation for your package.</p>
<p>They use R markdown to integrate code and output into the documentation. Typically:</p>
<ul>
<li>A single/main vignette showing a complete workflow.</li>
<li>Optional further vignette(s) going deeper on one aspect/application</li>
<li>Optional further vignette(s) for specialist audience (methodologists or developers)</li>
</ul>
<p>A vignette with the same name as the package (e.g., <code>vignettes/animalsounds.Rmd</code> or <code>vignettes/articles/animalsounds.Rmd</code>) automatically becomes a top-level “Get started” link.</p>
<aside class="notes">
<p>Fairly short read ~10 minutes</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="use_vignette" class="slide level2">
<h2><code>use_vignette()</code></h2>
<p>Easiest way to get started is with <code>usethis::use_vignette()</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_vignette</span>(<span class="st">"name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Adds to DESCRIPTION</p>
<pre>Suggests: knitr
VignetteBuilder: knitr
</pre>
<p>Creates <code>vignettes/</code></p>
<p>Drafts <code>vignettes/name.Rmd</code></p>
<aside class="notes">
<p>use_vignette() will fill both title fields with the “name” of the file, but you’ll want to edit to something more descriptive.</p>
<p>Needs to be .Rmd not .qmd. Quarto is not R-specific and CRAN can’t publish .qmd files.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="vignette-rmarkdown-special-metadata" class="slide level2">
<h2>Vignette = Rmarkdown + special metadata</h2>
<pre><code>---
title: "Vignette Title"
author: "Vignette author"
date: "2025-05-13"
output: rmarkdown::html_vignette
vignette: &gt;
%\VignetteIndexEntry{Vignette Title}
%\VignetteEngine{knitr::rmarkdown}
%\VignetteEncoding{UTF-8}
---
</code></pre>
<ul>
<li><code>html_vignette</code> output uses a custom style sheet to keep the file size of the HTML as small as possible.</li>
<li>The <code>vignette:</code> field contains special metadata needed when the package is built. <strong>Don’t forget to change the title here too!</strong></li>
</ul>
</section>
<section id="vignette-workflow" class="slide level2">
<h2>Vignette workflow</h2>

<img data-src="images/vignette_workflow.png" class="quarto-figure quarto-figure-center r-stretch"><aside class="notes">
<p>Need to install package so can call with <code>library()</code></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="articles" class="slide level2">
<h2>Articles</h2>
<p>Vignette code needs to be able to run on CRAN. There are some cases where <a href="https://r-pkgs.org/vignettes.html#sec-vignettes-eval-option">this is not possible</a>.</p>
<p>As an alternative, you can use articles instead of vignettes:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_article</span>(<span class="st">"my-article"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>✔ Adding 'rmarkdown' to Config/Needs/website
✔ Creating 'vignettes/'
✔ Creating 'vignettes/articles/'
✔ Adding '*.html', '*.R' to 'vignettes/.gitignore'
✔ Writing 'vignettes/articles/my-article.Rmd'
• Modify 'vignettes/articles/my-article.Rmd'
✔ Adding '^vignettes/articles$' to '.Rbuildignore'</code></pre>
</section>
<section id="your-turn-2" class="slide level2">
<h2>Your turn</h2>
<ol type="1">
<li>Install your <strong>animalsounds</strong> package and restart R (Install button).</li>
<li>Create a simple vignette, <code>animalsounds</code>, that shows how to use <code>animal_sounds()</code>.</li>
<li>Fix the “vignette title” in the YAML header.</li>
<li>Knit the vignette to preview it.</li>
<li>Run <code>devtools::install(build_vignettes = TRUE)</code> to install the package with the vignettes. Call <code>browseVignettes("animalsounds")</code> to open your vignette.</li>
<li>Commit your changes to git.</li>
</ol>
</section></section>
<section>
<section id="news" class="title-slide slide level1 inverse center">
<h1>NEWS</h1>

</section>
<section id="track-changes-in-a-news-file" class="slide level2">
<h2>Track changes in a NEWS file</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_news_md</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Add news for the latest version at the top.</p>
<p>Use a top-level heading for each release version</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="co"># animalsounds 1.0.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="what-news-to-include" class="slide level2">
<h2>What news to include</h2>
<p>Add each change in a bulleted list:</p>
<ul>
<li>If you have many changes, split into subsections (e.g. <code>## Major changes</code>, <code>## Minor improvements</code>, <code>## Bug fixes</code>).</li>
<li>Wait until release to decide if subsections are necessary</li>
</ul>
<p>Note connections to GitHub:</p>
<ul>
<li>If related to a GitHub issue, add the issue number, e.g.&nbsp;(<code>#10</code>).</li>
<li>If related to a pull request, add the pull request number and the author, e.g.&nbsp;(<code>#101, @hadley</code>).</li>
</ul>
</section></section>
<section>
<section id="package-website-with-pkgdown" class="title-slide slide level1 inverse center">
<h1>Package website with pkgdown</h1>

</section>
<section id="a-package-website-pkgdown" class="slide level2">
<h2>A package website pkgdown</h2>
<p>The <strong>pkgdown</strong> package is designed to make it quick and easy to build a website for your package:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_pkgdown</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Why have a website for your package?</p>
<ul>
<li>Google-ability</li>
<li>Easy-to-read and browse documentation and package information in one place</li>
<li>Examples with output!</li>
</ul>
</section>
<section id="build-a-website" class="slide level2">
<h2>Build a website</h2>
<p><code>pkgdown::build_site()</code> creates a package website based on the standard documentation files.</p>
<p><strong>Home page</strong>: based on README</p>
<p><strong>Reference</strong>:</p>
<ul>
<li>one page for each help file</li>
<li>generates an index page, with functions listed alphabetically by default</li>
</ul>
<aside class="notes">
<p>For packages with lots of functions, it’s good to organise them by theme or functionality.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="build-a-website-ctd" class="slide level2">
<h2>Build a website (ctd)</h2>
<p><strong>Articles</strong>: one page for each vignette</p>
<p><strong>Get Started</strong>: if you have a vignette with filename = package name</p>
<p><strong>News</strong>: based on NEWS.md</p>
<p>Plus:</p>
<ul>
<li>A link to your GitHub repo (if listed in the DESCRIPTION url field).</li>
<li>A link to the License</li>
<li>Any badges added to your README (e.g.&nbsp;from GitHub Actions)</li>
</ul>
</section>
<section id="hosting-your-website" class="slide level2">
<h2>Hosting your website</h2>
<ul>
<li><p>You can host your website directly from its GitHub repo (repo has to be public)</p></li>
<li><p>The recommended approach is to let GitHub build your page (instead of calling <code>pkgdown::build_site()</code> and committing and pushing the artifacts of the built website (i.e., html files) to GitHub</p></li>
<li><p>Add an action to your GitHub repo to be run automatically every time you push to it to rebuild the site:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>usethis<span class="sc">::</span><span class="fu">use_pkgdown_github_pages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>The URL will be https://USERNAME.github.io/animalsounds</p></li>
</ul>
<aside class="notes">
<p>use_pkgdown_github_pages() will:</p>
<ul>
<li>call <code>use_pkgdown()</code> - allow it to overwrite existing <code>_pkgdown.yml</code> (will add the url)</li>
<li>set up a <code>gh-pages</code> branch from which to deploy the site</li>
<li>add a <code>pkgdown.yml</code> to .github/workflows</li>
</ul>
<p>Will still need to call <code>pkgdown::build_site()</code> to preview locally</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="customising-your-website" class="slide level2">
<h2>Customising your website</h2>
<p>You can add more information to <code>_pkgdown.yml</code> to customise the package website:</p>
<ul>
<li><p>curate the index for the Reference page - functions can be grouped and described in categories</p>
<p><a href="https://pkgdown.r-lib.org/articles/pkgdown.html#reference" class="uri">https://pkgdown.r-lib.org/articles/pkgdown.html#reference</a></p></li>
<li><p>customise the appearance</p>
<p><a href="https://pkgdown.r-lib.org/articles/customise.html" class="uri">https://pkgdown.r-lib.org/articles/customise.html</a></p></li>
</ul>
</section>
<section id="your-turn-3" class="slide level2">
<h2>Your turn</h2>
<ol type="1">
<li>Run <code>usethis::use_pkgdown_github_pages()</code> – this will ask you to install <strong>pkgdown</strong> if you don’t already have it.</li>
<li>Read through all the output in the console to see the many things that this function does.</li>
<li>Look at the diffs in the Git pane. Commit and push all changes.</li>
<li>Go to your GitHub repo of the package. Click on <strong>Actions</strong>. If there’s a green tick next to “pages build and deployment” then your site is ready to view!</li>
<li>Click on the link to the website under the <strong>About</strong> section of the repo.</li>
<li>(Bonus) Change the appearance of the site with a Bootswatch theme: <a href="https://pkgdown.r-lib.org/articles/customise.html#bootswatch-themes" class="uri">https://pkgdown.r-lib.org/articles/customise.html#bootswatch-themes</a>.</li>
</ol>
</section></section>
<section>
<section id="end-matter" class="title-slide slide level1 inverse center">
<h1>End matter</h1>

</section>
<section id="references" class="slide level2">
<h2>References</h2>
<p>Wickham, H and Bryan, J, <em>R Packages</em> (2nd edn, in progress), <a href="https://r-pkgs.org" class="uri">https://r-pkgs.org</a>.</p>
<p>R Core Team, <em>Writing R Extensions</em>, <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-exts.html</a></p>
</section>
<section id="license" class="slide level2">
<h2>License</h2>
<p>Licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License (<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a>).</p>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
                // target, if specified
                link.setAttribute("target", "_blank");
                if (link.getAttribute("rel") === null) {
                  link.setAttribute("rel", "noopener");
                }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>